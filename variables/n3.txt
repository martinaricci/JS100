"ReferenceError: foo is not defined" because foo is out of scope. It's referring to a variable declared inside another scope that can't be accessed out of it.